<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Auto Translate by Country</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      background-color: #f0f0f0;
      color: #333;
    }

    h1 {
      color: #2c3e50;
    }

    p {
      font-size: 18px;
      line-height: 1.6;
    }

    .location {
      margin-top: 20px;
      font-weight: bold;
      color: #555;
    }

    .note {
      margin-top: 40px;
      font-style: italic;
      color: #999;
    }
  </style>
</head>
<body>

  <h1>Welcome to Our Global Website!</h1>

  <p>
    This site automatically translates content to match your location. Whether you're in India, the USA, or Saudi Arabia, the language will adjust accordingly to enhance your browsing experience.
  </p>

  <p>
    Using intelligent location detection and Google Translate, we aim to make this website accessible for everyone, everywhere.
  </p>

  <div class="location" id="user-location">Detecting your location...</div>

  <div class="note">
    This demo uses IP-based geolocation and Google Translate to deliver content in Hindi, Arabic, or English.
  </div>

  <!-- Google Translate Element (Hidden) -->
  <div id="google_translate_element" style="display:none;"></div>

  <!-- Google Translate Script -->
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        {
          pageLanguage: 'en',
          includedLanguages: 'en,hi,ar',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        },
        'google_translate_element'
      );
    }
  </script>

  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- Location Detection and Auto-Translation -->
  
  
 <script>
  const countryLangMap = {
    IN: 'hi', // India -> Hindi
    US: 'en', // United States -> English
    SA: 'ar'  // Saudi Arabia -> Arabic
  };

  fetch('https://ipapi.co/json/')
    .then(response => response.json())
    .then(data => {
      const countryCode = data.country_code;
      const city = data.city;
      const region = data.region;
      const country = data.country_name;

      document.getElementById('user-location').textContent =
        `You are visiting from ${city}, ${region}, ${country}.`;

      const targetLang = countryLangMap[countryCode] || 'en';

      const observer = new MutationObserver(() => {
        const select = document.querySelector('.goog-te-combo');
        if (select && select.length > 1) {
          select.value = targetLang;
          select.dispatchEvent(new Event('change'));
          observer.disconnect(); // Stop observing once done
        }
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    })
    .catch(() => {
      document.getElementById('user-location').textContent =
        'Unable to detect location. Default language applied.';
    });
</script>


</body>
</html>
